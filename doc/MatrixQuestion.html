<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: MatrixQuestion
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (M)</a> &raquo;
    
    
    <span class="title">MatrixQuestion</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: MatrixQuestion
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">ActiveRecord::Base</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">ActiveRecord::Base</li>
          
            <li class="next">MatrixQuestion</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">app/models/question_models/matrix_question.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A MatrixQuestion is a set of ChoiceQuestions which share a single set of
ChoiceAnswers.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#answer_type-instance_method" title="#answer_type (instance method)">- (Object) <strong>answer_type</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clone_me-instance_method" title="#clone_me (instance method)">- (MatrixQuestion) <strong>clone_me</strong>(target_sv) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Makes a deep copy of the MatrixQuestion (when cloning a survey).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_headers-instance_method" title="#column_headers (instance method)">- (Array&lt;String&gt;) <strong>column_headers</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Used in displaying the ChoiceAnswer values on the SurveyVersion show view.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_to_page-instance_method" title="#copy_to_page (instance method)">- (MatrixQuestion) <strong>copy_to_page</strong>(page) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Makes a deep copy of the MatrixQuestion (when cloning a Page).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rows-instance_method" title="#rows (instance method)">- (ActiveRecord::Relation) <strong>rows</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Used for displaying ChoiceQuestion properties on the SurveyVersion show
view.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="answer_type-instance_method">
  
    - (<tt>Object</tt>) <strong>answer_type</strong> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question_models/matrix_question.rb', line 37</span>

<span class='kw'>def</span> <span class='id identifier rubyid_answer_type'>answer_type</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>matrix</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="clone_me-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="MatrixQuestion (class)">MatrixQuestion</a></span></tt>) <strong>clone_me</strong>(target_sv) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Makes a deep copy of the MatrixQuestion (when cloning a survey)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>target_sv</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="SurveyVersion.html" title="SurveyVersion (class)">SurveyVersion</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the SurveyVersion destination for the new cloned copy</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="MatrixQuestion (class)">MatrixQuestion</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the cloned MatrixQuestion</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question_models/matrix_question.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_clone_me'>clone_me</span><span class='lparen'>(</span><span class='id identifier rubyid_target_sv'>target_sv</span><span class='rparen'>)</span>
  <span class='comment'>#start matrix hash
</span>  <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
  <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
                <span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='symbol'>:survey_version_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_target_sv'>target_sv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='comma'>,</span>
                <span class='symbol'>:question_content_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span>
               <span class='rparen'>)</span>
  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>statement</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'>#build se hash
</span>  <span class='id identifier rubyid_se_attribs'>se_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_survey_element'>survey_element</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
                <span class='symbol'>:survey_version_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_target_sv'>target_sv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span>
                <span class='symbol'>:page_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_target_sv'>target_sv</span><span class='period'>.</span><span class='id identifier rubyid_pages'>pages</span><span class='period'>.</span><span class='id identifier rubyid_find_by_clone_of_id'>find_by_clone_of_id</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_survey_element'>survey_element</span><span class='period'>.</span><span class='id identifier rubyid_page_id'>page_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
               <span class='rparen'>)</span>
  <span class='id identifier rubyid_se_attribs'>se_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'>#build content question hash
</span>  <span class='id identifier rubyid_choice_questions'>choice_questions</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_choice_question'>choice_question</span><span class='op'>|</span>
    <span class='id identifier rubyid_qc_attribs'>qc_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:matrix_statement</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_statement'>statement</span><span class='comma'>,</span> <span class='symbol'>:skip_observer</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_qc_attribs'>qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ca_attribs'>ca_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_choice_answers'>choice_answers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_choice_answer'>choice_answer</span><span class='op'>|</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_answer'>choice_answer</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
                      <span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_choice_answer'>choice_answer</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
                    <span class='rparen'>)</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

      <span class='comment'>#update the next page pointer
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>next_page_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>next_page_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Page</span><span class='period'>.</span><span class='id identifier rubyid_find_by_survey_version_id_and_clone_of_id'>find_by_survey_version_id_and_clone_of_id</span><span class='lparen'>(</span> <span class='id identifier rubyid_target_sv'>target_sv</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_new_answer'>new_answer</span><span class='period'>.</span><span class='id identifier rubyid_next_page_id'>next_page_id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_cq_attribs'>cq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
                  <span class='symbol'>:question_content_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_qc_attribs'>qc_attribs</span><span class='comma'>,</span>
                  <span class='symbol'>:choice_answers_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ca_attribs'>ca_attribs</span><span class='comma'>,</span>
                  <span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span><span class='comma'>,</span>
                  <span class='symbol'>:skip_observer</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
                 <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:choice_questions_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='comma'>,</span> <span class='symbol'>:survey_element_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_se_attribs'>se_attribs</span><span class='rparen'>)</span>
  <span class='const'>MatrixQuestion</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="column_headers-instance_method">
  
    - (<tt>Array&lt;String&gt;</tt>) <strong>column_headers</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Used in displaying the ChoiceAnswer values on the SurveyVersion show view.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of the first ChoiceQuestion's ChoiceAnswer values</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question_models/matrix_question.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_column_headers'>column_headers</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_limit'>limit</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_choice_answers'>choice_answers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_a'>a</span><span class='op'>|</span> <span class='id identifier rubyid_a'>a</span><span class='period'>.</span><span class='id identifier rubyid_answer'>answer</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="copy_to_page-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="MatrixQuestion (class)">MatrixQuestion</a></span></tt>) <strong>copy_to_page</strong>(page) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Makes a deep copy of the MatrixQuestion (when cloning a Page)</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>page</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Page.html" title="Page (class)">Page</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the page to be cloned onto</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="MatrixQuestion (class)">MatrixQuestion</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the cloned copy</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question_models/matrix_question.rb', line 99</span>

<span class='kw'>def</span> <span class='id identifier rubyid_copy_to_page'>copy_to_page</span><span class='lparen'>(</span><span class='id identifier rubyid_page'>page</span><span class='rparen'>)</span>
  <span class='comment'>#start matrix hash
</span>  <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
  <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:question_content_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_mq_qc_attribs'>mq_qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:statement</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_statement'>statement</span><span class='rbrace'>}</span><span class='tstring_content'> (copy)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>


  <span class='comment'>#build se hash
</span>  <span class='id identifier rubyid_se_attribs'>se_attribs</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_survey_element'>survey_element</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:page_id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_page'>page</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_se_attribs'>se_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'>#build content question hash
</span>  <span class='id identifier rubyid_choice_questions'>choice_questions</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_choice_question'>choice_question</span><span class='op'>|</span>
    <span class='id identifier rubyid_qc_attribs'>qc_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='symbol'>:matrix_statement</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_statement'>statement</span><span class='rbrace'>}</span><span class='tstring_content'> (copy)</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_qc_attribs'>qc_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_qc_attribs'>qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:statement</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_question_content'>question_content</span><span class='period'>.</span><span class='id identifier rubyid_statement'>statement</span><span class='rbrace'>}</span><span class='tstring_content'> (copy)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_qc_attribs'>qc_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span>
    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_ca_attribs'>ca_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_choice_answers'>choice_answers</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_choice_answer'>choice_answer</span><span class='op'>|</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span> <span class='op'>=</span> <span class='id identifier rubyid_choice_answer'>choice_answer</span><span class='period'>.</span><span class='id identifier rubyid_attributes'>attributes</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
        <span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span>
      <span class='rparen'>)</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

      <span class='comment'>#update the next page pointer
</span>      <span class='kw'>if</span> <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>next_page_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_answer_hash'>answer_hash</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>next_page_id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span> <span class='comment'>#clear pointer since copied question pointers would be invalid
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid_answer_hash'>answer_hash</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_cq_attribs'>cq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_cq_attribs'>cq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span>
                  <span class='symbol'>:question_content_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_qc_attribs'>qc_attribs</span><span class='comma'>,</span>
                  <span class='symbol'>:choice_answers_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_ca_attribs'>ca_attribs</span><span class='comma'>,</span>
                  <span class='symbol'>:clone_of_id</span> <span class='op'>=&gt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_choice_question'>choice_question</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
                 <span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_mq_attribs'>mq_attribs</span> <span class='op'>=</span> <span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:choice_questions_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='comma'>,</span> <span class='symbol'>:survey_element_attributes</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_se_attribs'>se_attribs</span><span class='rparen'>)</span>
  <span class='const'>MatrixQuestion</span><span class='period'>.</span><span class='id identifier rubyid_create!'>create!</span><span class='lparen'>(</span><span class='id identifier rubyid_mq_attribs'>mq_attribs</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rows-instance_method">
  
    - (<tt>ActiveRecord::Relation</tt>) <strong>rows</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Used for displaying ChoiceQuestion properties on the SurveyVersion show
view.</p>

<p>the MatrixQuestion's ChoiceQuestions with proper joins included</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>ActiveRecord::Relation</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an ActiveRecord::Relation of</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app/models/question_models/matrix_question.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rows'>rows</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_choice_questions'>choice_questions</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:question_content</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_includes'>includes</span><span class='lparen'>(</span><span class='symbol'>:choice_answers</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>