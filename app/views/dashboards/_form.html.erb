<% javascript 'dashboard.js' %>

<% if @dashboard.errors.any? %>
  <%= render('shared/errors', {object: @dashboard, object_type: 'dashboard'}) %>
<% end %>

<%= form_for [@survey, @survey_version, @dashboard] do |f| %>
	<%= field_set_tag "Options" do %>
		<div class="left_side">
			<%= f.label :name, "Name: " %>
		</div>
		<div class="right_side">
			<%= f.text_field :name %>
		</div>
	<% end %>

  <div class="page-nav">
    <%= link_to "New Widget", "#", :class => "newlink", :id => "newWidgetLink" %>
  </div>

  <ul>
    <%= f.fields_for :dashboard_elements do |elements_form| %>
      <li>
        <%= elements_form.hidden_field :dashboard_element_id %>
        <%= elements_form.hidden_field :survey_element_id %>
        <%= elements_form.hidden_field :sort_order_position %>
      </li>
    <% end %>
  </ul>

	<div class="submitButton">
		<% if f.object.new_record? %>
			<%= image_submit_tag "Submit.png", :alt=>"Create Dashboard" %>
		<% else %>
			<%= image_submit_tag "Submit.png", :alt=>"Update Dashboard" %>
		<% end %>
	</div>
<% end %>

<div id="dashboardModalShownDiv" style="display: none;"></div>

<div id="dashboardModalDiv" style="display: none;">
  <h2>Add a New Widget</h2>
  <%= select_tag :survey_element_id, options_from_collection_for_select(@survey_version.reporters, :se_id, :question) %>
  <%= link_to "Cancel", "#", :class => "simplemodal-close cancelLink-inline" %>
</div>
